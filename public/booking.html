<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confirm Booking | The Trip Connection - Secure Your Trip</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- MAIN CSS -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- ========== EXTRA CSS (BOOKING PAGE ONLY - ENHANCED) ========== -->
  <style>
    /* Hero Section (Focused Image) */
    .booking-hero{
      height: 45vh;
      background:url("https://images.pexels.com/photos/1570779/pexels-photo-1570779.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2") /* Professional travel image */
      center/cover no-repeat;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
    }
    .booking-hero::after{
      content:'';
      position:absolute;
      inset:0;
      background:rgba(0,0,0,.65);
      z-index:1;
    }
    .booking-hero-content{
      position:relative;
      z-index:2;
      text-align:center;
    }
    .booking-hero-content h1 {
        font-size: 3.5rem;
        font-weight: 800;
        text-shadow: 0 4px 8px rgba(0,0,0,0.4);
    }
    .booking-hero-content p {
        font-size: 1.1rem;
        margin-top: 10px;
    }


    /* Booking Form Container (Main Section) */
    .booking-section{
      padding:60px 6%;
      background:var(--bg-light);
      display:flex;
      justify-content:center;
    }

    .booking-box{
      max-width:700px; /* Slightly wider */
      width:100%;
      background:var(--bg-white);
      padding:40px;
      border-radius:20px;
      box-shadow:0 20px 50px rgba(0,0,0,.15);
      border-top: 5px solid var(--primary-color);
    }

    .booking-box h2{
      text-align:center;
      margin-bottom:30px;
      font-weight: 700;
      color: var(--secondary-color);
    }

    /* Input Grid Layout for better spacing */
    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 10px;
    }
    
    .input-full {
        grid-column: 1 / -1; /* Full width input */
    }

    .booking-box input,
    .booking-box select,
    .booking-box textarea{
      width:100%;
      padding:15px; /* Bigger padding */
      border-radius:10px;
      border:2px solid #eee;
      font-family:inherit;
      font-size:16px;
      transition: border-color 0.3s;
    }
    .booking-box input:focus,
    .booking-box select:focus,
    .booking-box textarea:focus {
        border-color: var(--primary-color);
        outline: none;
    }

    .booking-box textarea{
      resize:vertical;
      min-height:120px;
    }

    .booking-box button{
      width:100%;
      padding:16px;
      border:none;
      border-radius:30px;
      background:linear-gradient(135deg, var(--primary-color), #ff9f00);
      color:#fff;
      font-size:17px;
      font-weight:700;
      cursor:pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 10px 25px rgba(255,107,0,0.4);
    }
    .booking-box button:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 35px rgba(255,107,0,0.6);
    }

    /* Message States */
    .loader, .message-status {
      text-align:center;
      margin-top:20px;
      padding: 10px;
      border-radius: 8px;
    }
    .loader {
      display:none;
      color: #0d6efd;
      background: #e6f7ff;
    }

    .message-status {
        font-weight: 600;
    }
    .status-success {
        color: green;
        background: #e6ffed;
    }
    .status-error {
        color: red;
        background: #ffe6e6;
    }
    
    /* Responsive */
    @media (max-width: 600px) {
        .booking-hero-content h1 {
            font-size: 2.5rem;
        }
        .form-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }
    }

    /* Header actions */
.header-actions {
  display: flex;
  align-items: center;
  gap: 15px; /* Reduced gap slightly for better look */
}

/* FIX: Login Button Styling */
.login-btn {
    /* Base: Text-based pill button */
    font-weight: 600;
    padding: 8px 15px; 
    border-radius: 999px; 
    border: 1px solid #ccc; /* Subtle border */
    color: var(--secondary-color);
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex; /* Allow icon and text to align */
    align-items: center;
    gap: 6px; /* Gap between icon and text */
}

.login-btn:hover {
    color: var(--primary-color);
    border-color: var(--primary-color);
    background: #fff7f1; /* Very light background on hover */
    transform: scale(1.02);
}

/* ... (cta-button and mobile-menu-icon styles remain the same) ... */


/* --- Who We Are Section --- */
/* ... (All other sections CSS remains the same) ... */


/* Responsive Fixes for Header Actions */
@media (max-width: 768px) {
  /* ... (other mobile CSS remains) ... */

  .header-actions {
    gap: 8px; /* Reduce gap further on mobile */
  }
  
  .login-btn {
      /* On small screens, hide the login button to save space 
         or just show the icon if you prefer: 
         display: flex; width: 40px; height: 40px; padding: 0; justify-content: center; */
      display: none; 
  }
  
  .cta-button {
      padding: 8px 15px;
      font-size: 14px;
  }
  
  .mobile-menu-icon {
    display: block;
  }
}
  </style>
</head>

<body>

<!-- ==================== PRELOADER ==================== -->
    <div id="preloader">
        <img src="/images/logofinal.png" alt="Loading The Trip Connection Website">
    </div>

    <!-- ==================== HEADER / NAVBAR ==================== -->
    <header class="header">
        <a href="index.html" class="logo">
            <img src="/images/logofinal.png" alt="The Trip Connection Logo">
        </a>
        
        <nav class="navbar">
            <ul class="nav-list">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li class="dropdown">
                    <a href="packages.html">Packages ‚ñæ</a>
                    <ul class="dropdown-menu">
                        <li><a href="domestic.html">Domestic Tours</a></li>
                        <li><a href="international.html">International Tours</a></li>
                        <li><a href="car-pricing.html">Pickup and Drop Service</a></li>
                        <li><a href="package-details.html">All Packages</a></li>
                    </ul>
                </li>            
                <li class="dropdown">
                    <a href="services.html">Services ‚ñæ</a>
                    <ul class="dropdown-menu">
                        <li><a href="bus.html">Bus Booking</a></li>
                        <li><a href="car.html">Car Booking</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                    </ul>
                </li>
                
                <li><a href="blog.html">Blog</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>

        <div class="header-actions">
            <a href="/admin/login.html" class="login-btn" title="Admin Login">
                <i class="fas fa-user"></i>
            </a>
            <a href="booking.html" class="cta-button">Book Now</a>
            <div class="mobile-menu-icon">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

<main>
    
<!-- BOOKING HERO -->
<section class="booking-hero">
    <div class="booking-hero-content hero-text-animate"> 
        <h1 class="reveal-delay-1">Confirm Your Trip Booking</h1>
        <p class="reveal-delay-2">Fill in your details to secure your reservation. Our team will contact you shortly.</p>
    </div>
</section>

<!-- BOOKING FORM -->
<section class="booking-section">
  <form class="booking-box reveal fade-up" id="bookingForm">
    <h2>Secure Booking - Step 1: Your Details</h2>
    
    <div class="form-grid">
        <!-- Name -->
        <div>
            <input type="text" id="name" placeholder="Full Name" required>
        </div>
        <!-- Email -->
        <div>
            <input type="email" id="email" placeholder="Email Address" required>
        </div>
        <!-- Phone -->
        <div>
            <input type="tel" id="phone" placeholder="Mobile Number" required>
        </div>
        <!-- Persons -->
        <div>
            <input type="number" id="persons" placeholder="Number of Persons" min="1" required>
        </div>
        <!-- Date -->
        <div>
            <input type="date" id="date" required>
        </div>
        <!-- Package Select -->
        <div>
            <select id="package" required>
              <option value="">Select Package Type (Domestic/Intl)</option>
              <option value="Bali Paradise Escape">Bali Paradise Escape</option>
              <option value="Swiss Alps Tour">Swiss Alps Tour</option>
              <option value="Royal Rajasthan">Royal Rajasthan</option>
              <option value="Adventure Ladakh">Adventure Ladakh</option>
              <option value="Custom Tour">Custom Tour / Not Listed</option>
            </select>
        </div>
    </div>
    
    <!-- Special Requirements -->
    <div class="input-full">
        <textarea id="message" placeholder="Any special requirement (e.g., flight details, dietary needs, hotel upgrade request)"></textarea>
    </div>

    <button type="submit">
        <i class="fas fa-paper-plane"></i> Confirm & Send Booking Request
    </button>

    <div class="loader" id="loader">
      <i class="fas fa-spinner fa-spin"></i> Processing and Confirming Request...
    </div>

    <div class="message-status" id="successMsg">
      üéâ Booking submitted successfully! We will contact you soon.
    </div>

  </form>
</section>

<!-- FOOTER -->
<footer class="footer">
    <!-- ... Footer Content ... -->
    <div class="footer-container">
        <div class="footer-column about-us">
            <h3>The Trip Connection</h3>
            <p>Dedicated to providing world-class travel experiences globally. Let us guide your next unforgettable adventure!</p>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
        <div class="footer-column">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="about.html">About Us</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="faq.html">FAQs</a></li>
                <li><a href="policies.html">Policies</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h4>Top Packages</h4>
            <ul>
                <li><a href="#">Domestic Tours</a></li>
                <li><a href="#">International Tours</a></li>
                <li><a href="#">Honeymoon Special</a></li>
                <li><a href="#">Adventure Trips</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h4>Contact Info</h4>
            <p><i class="fas fa-map-marker-alt"></i> 123 Travel Lane, Mumbai</p>
            <p><i class="fas fa-phone"></i> +91 98765 43210</p>
            <p><i class="fas fa-envelope"></i> help@tripconnection.com</p>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 The Trip Connection. Designed with ‚ù§Ô∏è for travelers.</p>
    </div>
</footer>

<!-- FLOATING WIDGETS -->
 <div class="floating-widgets">
    <a href="https://wa.me/919998250825?text=Hello!%20I%20saw%20your%20website%20'The%20Trip%20Connection'%20and%20I%20am%20interested%20in%20your%20packages." class="widget-btn whatsapp-btn" target="_blank" title="WhatsApp Us">
        <i class="fab fa-whatsapp"></i>
    </a>
    <a href="/pdf/brochure.pdf" class="widget-btn brochure-btn" download title="Download Brochure">
        <i class="fas fa-download"></i>
    </a>
</div>

<!-- ================= JS ================= -->
<script>
document.getElementById('bookingForm').addEventListener('submit', async function(e){
  e.preventDefault();

  const loader = document.getElementById('loader');
  const successMsgElement = document.getElementById('successMsg');

  // Hide previous messages and show loader
  successMsgElement.style.display = 'none';
  loader.style.display = 'block';

  const payload = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    phone: document.getElementById('phone').value,
    
    // --- FIX APPLIED HERE ---
    package: document.getElementById('package').value, // Renamed from packageTitle to 'package'
    date: document.getElementById('date').value,       // Renamed from travelDate to 'date'
    // ------------------------
    
    persons: document.getElementById('persons').value,
    message: document.getElementById('message').value,
    source: 'Booking Page'
  };

  // ... (Rest of the fetch and status logic remains the same) ...
  
  try {
    const res = await fetch('/api/bookings', { // API endpoint for Tour Bookings
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    if(!res.ok) {
        // ... error handling ...
        const errorData = await res.json().catch(() => ({ message: 'Server responded with error status.' }));
        throw new Error(errorData.message || `HTTP error! Status: ${res.status}`);
    }

    loader.style.display = 'none';
    
    // Display Success
    successMsgElement.innerText = 'üéâ Booking submitted successfully! We will contact you soon.';
    successMsgElement.classList.add('status-success');
    successMsgElement.style.display = 'block';

    e.target.reset();

  } catch (err) {
    // ... error display ...
    loader.style.display = 'none';
    const errorMessage = err.message || 'Booking failed due to a network error. Please check your connection.';
    successMsgElement.innerText = `‚ùå Error: ${errorMessage}`;
    successMsgElement.classList.remove('status-success');
    successMsgElement.classList.add('status-error');
    successMsgElement.style.display = 'block';
  }
});
</script>

<script src="/js/main.js"></script>
</body>
</html>